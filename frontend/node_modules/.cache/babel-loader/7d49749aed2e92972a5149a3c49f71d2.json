{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'LoginView',\n\n  data() {\n    return {\n      userHasAnAccount: false,\n      firstname: '',\n      email: '',\n      password: '',\n      passwordConfirmation: '',\n      user: {},\n      errorLogin: false,\n      errorSignup: false,\n      UserAlreadyExists: false\n    };\n  },\n\n  methods: {\n    switchToLogin() {\n      this.userHasAnAccount = !this.userHasAnAccount;\n    },\n\n    handleLoginOrSignUp() {\n      // If the user tries to log in :\n      if (this.userHasAnAccount) {\n        axios.post('http://localhost:8001/login', {\n          email: this.email,\n          password: this.password\n        }, {\n          withCredentials: true\n        }).then(res => {\n          console.log(res.data);\n\n          if (res.data.success) {\n            this.$router.push('/');\n          }\n        }).catch(error => {\n          this.errorLogin = true;\n          setTimeout(() => {\n            this.errorLogin = false;\n          }, 2000);\n          return error;\n        });\n      } // If the user tries to sign up (i.e doesn't have an account):\n\n\n      if (!this.userHasAnAccount) {\n        // Checking passwords: If the two passwords don't match, an error message gets displayed:\n        if (this.password !== this.passwordConfirmation) {\n          this.errorSignup = true;\n          setTimeout(() => {\n            this.errorSignup = false;\n          }, 2600);\n          return null;\n        }\n\n        const user = {\n          firstname: 'cher lecteur',\n          email: this.email,\n          password: this.password,\n          age: 'Non indiqué',\n          isAdmin: false,\n          preferences: {\n            goals: [],\n            interests: []\n          },\n          books: {\n            alreadyRead: [],\n            toRead: [],\n            allBooks: []\n          }\n        };\n        axios.post('http://localhost:8001/signup', { ...user\n        }, {\n          withCredentials: true\n        }).then(res => {\n          console.log(res.data);\n\n          if (res.data.success) {\n            this.$router.push('/inscription/preferences');\n          }\n        }) // If error, it means that the account already exists:\n        .catch(err => {\n          this.UserAlreadyExists = true;\n          setTimeout(() => {\n            this.UserAlreadyExists = false;\n          }, 2600);\n          return console.log(err);\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAyDA;AACA;EACAA,iBADA;;EAEAC;IACA;MACAC,uBADA;MAEAC,aAFA;MAGAC,SAHA;MAIAC,YAJA;MAKAC,wBALA;MAMAC,QANA;MAOAC,iBAPA;MAQAC,kBARA;MASAC;IATA;EAWA,CAdA;;EAeAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;MACA;QACAC,MACAC,IADA,CAEA,6BAFA,EAGA;UAAAX;UAAAC;QAAA,CAHA,EAIA;UAAAW;QAAA,CAJA,EAMAC,IANA,CAMAC;UACAC;;UACA;YACA;UACA;QACA,CAXA,EAYAC,KAZA,CAYAC;UACA;UACAC;YACA;UACA,CAFA,EAEA,IAFA;UAGA;QACA,CAlBA;MAmBA,CAtBA,CAuBA;;;MACA;QACA;QACA;UACA;UACAA;YACA;UACA,CAFA,EAEA,IAFA;UAGA;QACA;;QACA;UACAnB,yBADA;UAEAC,iBAFA;UAGAC,uBAHA;UAIAkB,kBAJA;UAKAC,cALA;UAMAC;YACAC,SADA;YAEAC;UAFA,CANA;UAUAC;YACAC,eADA;YAEAC,UAFA;YAGAC;UAHA;QAVA;QAgBAjB,MACAC,IADA,CAEA,8BAFA,EAGA;QAAA,CAHA,EAIA;UAAAC;QAAA,CAJA,EAMAC,IANA,CAOAC;UACAC;;UACA;YACA;UACA;QACA,CAZA,EAaA;QAbA,CAcAC,KAdA,CAcAY;UACA;UACAV;YACA;UACA,CAFA,EAEA,IAFA;UAGA;QACA,CApBA;MAqBA;IACA;;EA3EA;AAfA","names":["name","data","userHasAnAccount","firstname","email","password","passwordConfirmation","user","errorLogin","errorSignup","UserAlreadyExists","methods","switchToLogin","handleLoginOrSignUp","axios","post","withCredentials","then","res","console","catch","error","setTimeout","age","isAdmin","preferences","goals","interests","books","alreadyRead","toRead","allBooks","err"],"sourceRoot":"src/views","sources":["LoginView.vue"],"sourcesContent":["<template>\n    <div class=\"wrapper\">\n        <div class=\"content\">\n            <div class=\"notification is-danger is-light column is-6\" v-if=\"errorLogin || errorSignup || UserAlreadyExists\" >\n                <p class=\"error-notif\" v-if=\"errorLogin\">Oups... Identifiants incorrects..!</p>\n                <p class=\"error-notif\" v-if=\"errorSignup\">Les deux mots de passe doivent être identiques </p>\n                <p class=\"error-notif\" v-if=\"UserAlreadyExists\">Compte déjà existant. Essayez de vous connecter. </p>\n                <button class=\"delete\"></button>\n            </div>\n            <!-- <h1>LOGIN PAGE</h1> -->\n            <!-- <img src=\"@/assets/logo.png\"\n                alt=\"\"\n                class=\"logo\"> -->\n            <div class=\"white-space\"></div>\n            <div class=\"login-quote\">\n                <div class=\"login-form\">\n                    <h2 class=\"is-size-2\">Bienvenue</h2>\n                    <h4 class=\"is-size-4\"> {{userHasAnAccount ? 'Connectez - vous' : 'Inscrivez - vous'}}</h4>\n\n                    <input class=\"input is-medium\" type=\"email\" placeholder=\"Email\" v-model=\"email\">\n\n                    <input\n                    class=\"input is-medium\"\n                    type=\"password\"\n                    placeholder=\"Mot de passe\"\n                    v-model=\"password\">\n\n                    <input\n                    :class=\"`input is-medium ${userHasAnAccount ? 'is-hidden' : ''}`\"\n                    type=\"password\"\n                    placeholder=\"Confirmer le mot de passe\" v-model=\"passwordConfirmation\">\n\n                    <input type=\"button\" :value=\"`${userHasAnAccount ? 'SE CONNECTER' : 'S\\'INSCRIRE'}`\" class=\"btn-valider\" @click=\"handleLoginOrSignUp\">\n\n                    <div class=\"texts\">\n                        <p>{{userHasAnAccount ? 'Vous n\\'avez pas de compte ? ' : 'Vous avez déjà un compte ? '}}\n                            <router-link to=\"\">\n                                <a href=\"\" @click=\"switchToLogin\">\n                                {{userHasAnAccount ? 'Inscrivez-vous' : 'Connectez-vous'}}\n                                </a>\n                            </router-link>\n                        </p>\n                        <p class=\"is-size-7\">En vous inscrivant, vous acceptez les <router-link to=\"\"><a href=\"\">conditions d’utilisation et la politique de confitentialité</a> </router-link> </p>\n                    </div>\n                </div>\n                <div class=\"quote-block\">\n                    <p class=\"quote\"> <span class=\"quote-signs left\"> “</span><span class=\"bigger\">R</span>ien <br> ne peut suffire à l'homme que ce qu'il n'a pas. <br><br><span class=\"quote-signs right\">\"</span></p>\n                    <p class=\"has-text-right proverbe\"> -Les pensées et proverbes wolofs (1963)</p>\n                </div>\n\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default ({\n  name: 'LoginView',\n  data () {\n    return {\n      userHasAnAccount: false,\n      firstname: '',\n      email: '',\n      password: '',\n      passwordConfirmation: '',\n      user: {},\n      errorLogin: false,\n      errorSignup: false,\n      UserAlreadyExists: false\n    }\n  },\n  methods: {\n    switchToLogin () {\n      this.userHasAnAccount = !this.userHasAnAccount\n    },\n    handleLoginOrSignUp () {\n      // If the user tries to log in :\n      if (this.userHasAnAccount) {\n        axios\n          .post(\n            'http://localhost:8001/login',\n            { email: this.email, password: this.password },\n            { withCredentials: true }\n          )\n          .then((res) => {\n            console.log(res.data)\n            if (res.data.success) {\n              this.$router.push('/')\n            }\n          })\n          .catch((error) => {\n            this.errorLogin = true\n            setTimeout(() => {\n              this.errorLogin = false\n            }, 2000)\n            return error\n          })\n      }\n      // If the user tries to sign up (i.e doesn't have an account):\n      if (!this.userHasAnAccount) {\n        // Checking passwords: If the two passwords don't match, an error message gets displayed:\n        if (this.password !== this.passwordConfirmation) {\n          this.errorSignup = true\n          setTimeout(() => {\n            this.errorSignup = false\n          }, 2600)\n          return null\n        }\n        const user = {\n          firstname: 'cher lecteur',\n          email: this.email,\n          password: this.password,\n          age: 'Non indiqué',\n          isAdmin: false,\n          preferences: {\n            goals: [],\n            interests: []\n          },\n          books: {\n            alreadyRead: [],\n            toRead: [],\n            allBooks: []\n          }\n        }\n        axios\n          .post(\n            'http://localhost:8001/signup',\n            { ...user },\n            { withCredentials: true }\n          )\n          .then(\n            res => {\n              console.log(res.data)\n              if (res.data.success) {\n                this.$router.push('/inscription/preferences')\n              }\n            })\n          // If error, it means that the account already exists:\n          .catch(err => {\n            this.UserAlreadyExists = true\n            setTimeout(() => {\n              this.UserAlreadyExists = false\n            }, 2600)\n            return console.log(err)\n          })\n      }\n    }\n  }\n})\n</script>\n\n<style scoped>\n@import url('https://fonts.googleapis.com/css2?family=Raleway:wght@300&family=Rufina:wght@400;700&display=swap');\n\n/* .logo{\n  display: block;\n  margin: auto;\n} */\n\n.wrapper{\n    background: url('@/assets/books.png') no-repeat;\n    background-position-x: 55%;\n    background-position-y:bottom;\n    background-size: 29%;\n    overflow: hidden;\n\n}\n.content{\n    /* background: url('@/assets/logo.png') no-repeat, url('@/assets/books.png') no-repeat; */\n    background: url('@/assets/logo.png') no-repeat;\n    background-position-x: center;\n    background-position-y: 3vh;\n    background-size: 20%;\n    text-align: center;\n    /* border: 1px solid black; */\n    margin: 0 auto;\n}\n\n.btn-valider:hover {\nbackground-color: #D8E0CF;\nbox-shadow: 0px 0px 0px rgba(216,224,207,1.00);\n}\n\n.btn-valider:active {\n  transform: translateY(4px);\n}\n\n.notification{\n    margin: auto;\n    font-size: 1.1rem;\n    position: fixed;\n    left: 25%;\n}\n\n.login-quote{\n    display: flex;\n}\n\n.login-form{\n    /* border: 1px solid black; */\n    font-family: 'Ibarra Real Nova', 'serif';\n    background-color: RGB(255, 248, 227);\n    background-color: #fff1cc9a;;\n    backdrop-filter: blur(5px);\n    border-radius: 5px;\n    margin: 2%;\n    padding-top: 5%;\n    width: 50%;\n}\n\n.quote-block{\n    /* border: 1px solid black; */\n    margin: 2%;\n    width: 50%;\n}\n\n.white-space{\n    height: 7rem;\n}\ninput{\n    margin: auto;\n    width: 75%;\n    margin: 2%;\n}\n\n.btn-valider{\n    color: white;\n    background-color: black;\n    font-weight: bold;\n}\n\n.texts{\n    margin: 6% auto 3%;\n    width: 90%;\n}\n\na{\n    color: black;\n    font-weight: bold;\n}\n\n.quote{\n    margin: 5% auto 0 auto;\n    padding-top: 7%;\n    font-size: 3rem;\n    line-height: 175%;\n    text-align: center;\n    font-family: 'Ibarra Real Nova', 'serif';\n    color: black;\n    -webkit-animation: 4s ease 0s normal forwards 1 fadein;\n    animation: 4s ease 0s normal forwards 1 fadein;\n}\n@keyframes fadein{\n    0% { opacity:0; }\n    50% { opacity:.5; }\n    100% { opacity:1; }\n}\n\n@-webkit-keyframes fadein{\n    0% { opacity:0; }\n    50% { opacity:.5; }\n    100% { opacity:1; }\n}\n\n.quote-signs{\n    display: block;\n    font-size: 12rem;\n    text-align: left;\n    font-family: 'Sorts Mill Goudy', serif;\n}\n\n.right{\n    text-align: right;\n    line-height: 12%;\n}\n\n.bigger{\n    font-size: 6rem;\n}\n.proverbe{\n    padding-bottom: -15vh;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}