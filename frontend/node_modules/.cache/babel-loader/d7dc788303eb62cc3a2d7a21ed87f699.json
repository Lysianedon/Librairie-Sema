{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'BookComponent',\n\n  data() {\n    return {};\n  },\n\n  props: {\n    bookSelection: {\n      type: Array,\n      required: false\n    },\n    personalisedSuggestion: {\n      type: Object,\n      required: false\n    }\n  },\n  methods: {\n    addToCollection(bookId, collection) {\n      // Adding the book to the corresponding collection : favorites or library:\n      if (collection === 'library') {\n        const bookToAddID = bookId;\n        axios.post('http://localhost:8001/user/library/allbooks', {\n          bookToAddID\n        }, {\n          withCredentials: true\n        }).then(res => {\n          if (res.data.success) {\n            console.log(res.data); // Displaying a success notification\n\n            this.$buefy.toast.open({\n              message: `Ajouté ${collection === 'library' ? 'à la bibliothèque' : 'aux favoris'}`,\n              type: 'is-success'\n            });\n          }\n        }).catch(err => {\n          // if (res.data.alreadyInList) {\n          // Displaying an error notification\n          this.$buefy.toast.open({\n            message: 'Livre déjà dans votre liste',\n            type: 'is-danger'\n          }); // }\n\n          return console.error(err);\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2CA;AACA;EACAA,qBADA;;EAEAC;IACA;EAGA,CANA;;EAOAC;IACAC;MACAC,WADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA;EALA,CAPA;EAiBAE;IACAC;MACA;MACA;QACA;QACAC,MACAC,IADA,CACA,6CADA,EACA;UAAAC;QAAA,CADA,EACA;UAAAC;QAAA,CADA,EAEAC,IAFA,CAEAC;UACA;YACAC,sBADA,CAEA;;YACA;cACAC,mFADA;cAEAZ;YAFA;UAIA;QACA,CAXA,EAYAa,KAZA,CAYAC;UACA;UACA;UACA;YACAF,sCADA;YAEAZ;UAFA,GAHA,CAOA;;UACA;QACA,CArBA;MAsBA;IACA;;EA5BA;AAjBA","names":["name","data","props","bookSelection","type","required","personalisedSuggestion","methods","addToCollection","axios","post","bookToAddID","withCredentials","then","res","console","message","catch","err"],"sourceRoot":"src/components","sources":["Book.vue"],"sourcesContent":["<template>\n    <div>\n    <div class=\"books\" v-if=\"bookSelection\">\n        <div :v-if=\"typeof bookSelection === Array\"\n            v-for=\"(book, index) in bookSelection\" :key=\"index\"\n            class=\"book\">\n            <img\n            class=\"img\"\n            :src=\"book.image\"\n            :alt=\"`page de couverture du livre : \\'${book.title} \\' `\"\n            srcset=\"\">\n            <h3>{{book.title}}</h3>\n            <h4>De: {{book.author}}</h4>\n            <h4>Pays: {{book.country}}</h4>\n        </div>\n    </div>\n\n    <!-------------------------- USERS PERSONALISED SUGGESTION --------------->\n\n    <div class=\"personalised-suggestion\" v-if=\"personalisedSuggestion\">\n         <img\n            class=\"img\"\n            :src=\"personalisedSuggestion.image\"\n            :alt=\"`page de couverture du livre : \\'${personalisedSuggestion.title} \\' `\"\n            srcset=\"\">\n          <div class=\"book-infos\">\n            <h3>{{personalisedSuggestion.title}}</h3>\n            <h4>De: {{personalisedSuggestion.author}}</h4>\n            <h4>Genre: {{personalisedSuggestion.genre}}</h4>\n            <h4>Pays: {{personalisedSuggestion.country}}</h4>\n            <h4 class=\"synopsis-title\">Synopsis:</h4>\n            <p> {{ personalisedSuggestion.synopsis}}</p>\n\n            <div class=\"btns\">\n              <button class=\"btn-option\" @click=\"addToCollection(personalisedSuggestion._id, 'library')\">Ajouter à ma bibliothèque</button>\n              <button class=\"btn-option\" @click=\"addToCollection(personalisedSuggestion._id, 'favorites')\">Ajouter à mes favoris</button>\n            </div>\n          </div>\n    </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  name: 'BookComponent',\n  data () {\n    return {\n\n    }\n  },\n  props: {\n    bookSelection: {\n      type: Array,\n      required: false\n    },\n    personalisedSuggestion: {\n      type: Object,\n      required: false\n    }\n  },\n  methods: {\n    addToCollection (bookId, collection) {\n      // Adding the book to the corresponding collection : favorites or library:\n      if (collection === 'library') {\n        const bookToAddID = bookId\n        axios\n          .post('http://localhost:8001/user/library/allbooks', { bookToAddID }, { withCredentials: true })\n          .then(res => {\n            if (res.data.success) {\n              console.log(res.data)\n              // Displaying a success notification\n              this.$buefy.toast.open({\n                message: `Ajouté ${collection === 'library' ? 'à la bibliothèque' : 'aux favoris'}`,\n                type: 'is-success'\n              })\n            }\n          })\n          .catch(err => {\n            // if (res.data.alreadyInList) {\n            // Displaying an error notification\n            this.$buefy.toast.open({\n              message: 'Livre déjà dans votre liste',\n              type: 'is-danger'\n              })    \n            // }\n            return console.error(err)\n          })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.book{\n    /* border: 1px solid black; */\n    height: 75vh;\n    height: fit-content;\n    width: 17vw;\n    margin: 1%;\n    padding: 2.5% 1.5% 3% 1.5%;\n    border-radius: 5px;\n    cursor: pointer;\n}\n\n.book:hover{\n  /* border: 1px solid rgb(207, 203, 203); */\n    box-shadow: 0 2px 4px rgba(128, 124, 124, 0.25), 0 2px 7px rgba(100, 98, 98, 0.22);\n}\n\n.books{\n  display: flex;\n}\n\n.img{\n    /* width: 93% !important; */\n    /* height: 90% !important; */\n    /* width: 275px !important; */\n    /* height: 340px !important; */\n    /* border: 1px solid black; */\n    margin: auto;\n    border-radius: 3px;\n    box-shadow: 0 8px 10px rgba(108, 106, 106, 0.25), 0 2px 7px rgba(188, 186, 186, 0.22);\n}\n\nh3{\n    font-size: 1.1rem !important;\n    font-weight: 600 !important;\n    line-height: 155% !important;\n}\n\nh3::first-letter{\n  text-transform: capitalize;\n}\n\nh4{\n    text-transform: capitalize;\n    font-size: 1rem !important;\n    font-weight: lighter !important;\n    margin-bottom: 3%;\n}\n\n.personalised-suggestion{\n  display: flex;\n  justify-content: space-between;\n  width: 65vw;\n  padding: 2.5% 1.5% 3% 1.5%;\n  border-radius: 5px;\n  cursor: default;\n}\n\n.book-infos{\n  margin-left: 6%;\n  margin-top: 7%;\n}\n\np{\n  line-height: 190%;\n  width: 90%;\n  text-align: justify;\n}\n.synopsis-title{\n  font-weight: bold !important;\n  margin-top: 6%;\n}\n\n.btns{\n  display: flex;\n}\n\nbutton{\n    font-weight: bold;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}